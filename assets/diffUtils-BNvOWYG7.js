import{s as z,d as $}from"./enums-BoehirYs.js";import{dD as B,V as L,b5 as R}from"./index-DMwY2Yeh.js";$.Loop,z.Linear;const U=` /-,
`;function g(t){let n=t.length;for(;n--;)if(!U.includes(t.charAt(n)))return!1;return!0}function J(t,n){const e=[];let r=0,o=-1;do if(o=t.indexOf("[",r),o>=r){if(o>r){const i=t.slice(r,o);e.push([i,null,g(i)])}if(r=o+1,o=t.indexOf("]",r),o>=r){if(o>r){const i=n[t.slice(r,o)];i&&e.push([null,i,!1])}r=o+1}}while(o!==-1);if(r<t.length){const i=t.slice(r);e.push([i,null,g(i)])}return e}function K(t,n,e,r){let o="",i=null;for(const M of n){const[p,c,s]=M;if(p)s?i=p:(i&&(o+=i,i=null),o+=p);else{let y=c;e!=null&&(y=F(c,e));const f=t.attributes[y];f&&(i&&(o+=i,i=null),o+=f)}}return X(o,r)}function X(t,n){switch(typeof t!="string"&&(t=String(t)),n){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function Q(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function Z(t){var n;return((n=t.data)==null?void 0:n.symbol)??null}function _(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function tt(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function nt(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}const et=(t,n=0)=>t==null||isNaN(t)?n:t;function rt(t){return(t?Object.keys(t):[]).map(n=>({name:n,alias:n,type:typeof t[n]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}function N(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function ot(t,n,e,r,o,i,M=!0){const{infos:p}=i;let c=1,s=0,y=0,f=0,l=1;for(const{absoluteAnchorPoint:m,offsetX:b,offsetY:k,rotation:D,size:O,frameHeight:I,rotateClockWise:T,scaleSymbolsProportionally:x}of p)l=m?1:c,y=A(b,k,s,l,y),f=S(b,k,s,l,f),I&&(x||M)&&(c*=O/I),s=V(D,T,s);const a=A(r,o,s,l,y),u=S(r,o,s,l,f);return{size:t*c,rotation:V(n,e,s),offsetX:a,offsetY:u}}function Y(t){return t.split(" ").map(n=>Number(n))}function E(t){return typeof t=="string"?Y(t):t}function it(t){return t!=null&&t.dashTemplate&&(t.dashTemplate=E(t.dashTemplate)),t}function P(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const n=t.symbolLayers;if(!n)return"Normal";for(const e of n)if(e.type==="CIMVectorMarker")return P(e)}break;case"CIMVectorMarker":{const n=t.markerGraphics;if(!n)return"Normal";for(const e of n)if(e.symbol)return P(e.symbol)}}return"Normal"}function F(t,n){if(n!==null){const e=n.get(t);return e?e.name:t}return t}function lt(t){return t.map(n=>({...n,propertyName:N(n.propertyName)}))}function st(t){const n={};for(const e in t){const r=t[e];n[N(e)]=r}return n}function S(t,n,e,r,o){const i=e*Math.PI/180;if(i){const M=Math.cos(i);return(Math.sin(i)*t+M*n)*r+o}return n*r+o}function A(t,n,e,r,o){const i=e*Math.PI/180;return i?(Math.cos(i)*t-Math.sin(i)*n)*r+o:t*r+o}function V(t,n,e){return n?e-t:e+t}const G=new Set(["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"]);function C(t){return t instanceof R}function w(t){return t instanceof L?Object.keys(t.items):C(t)?B(t).keys():t?Object.keys(t):[]}function d(t,n){return t instanceof L?t.items[n]:t[n]}function W(t,n){return!(!Array.isArray(t)||!Array.isArray(n))&&t.length!==n.length}function h(t){return t?t.declaredClass:null}function j(t,n){var f;const e=t.diff;if(e&&typeof e=="function")return e(t,n);const r=w(t),o=w(n);if(r.length===0&&o.length===0)return;if(!r.length||!o.length||W(t,n))return{type:"complete",oldValue:t,newValue:n};const i=o.filter(l=>!r.includes(l)),M=r.filter(l=>!o.includes(l)),p=r.filter(l=>o.includes(l)&&d(t,l)!==d(n,l)).concat(i,M).sort(),c=h(t);if(c&&G.has(c)&&p.length)return{type:"complete",oldValue:t,newValue:n};let s;const y=C(t)&&C(n);for(const l of p){const a=d(t,l),u=d(n,l);let m;if((y||typeof a!="function"&&typeof u!="function")&&a!==u&&(a!=null||u!=null)){if(e&&e[l]&&typeof e[l]=="function")m=(f=e[l])==null?void 0:f.call(e,a,u);else if(a instanceof Date&&u instanceof Date){if(a.getTime()===u.getTime())continue;m={type:"complete",oldValue:a,newValue:u}}else m=typeof a=="object"&&typeof u=="object"&&h(a)===h(u)?j(a,u):{type:"complete",oldValue:a,newValue:u};m!=null&&(s!=null?s.diff[l]=m:s={type:"partial",diff:{[l]:m}})}}return s}function at(t,n){return q(t,n)}function q(t,n){if(t==null)return!1;const e=n.split(".");let r=t;for(const o of e){if(r.type==="complete")return!0;if(r.type!=="partial")return!1;{const i=r.diff[o];if(!i)return!1;r=i}}return!0}function ut(t,n){if(!t)return!1;if(t.type==="partial"){const e=Object.keys(t.diff);return e.length===1&&e[0]===n}return!1}function ct(t,n){if(typeof t!="function"&&typeof n!="function"&&(t!=null||n!=null))return t==null||n==null||typeof t=="object"&&typeof n=="object"&&h(t)!==h(n)?{type:"complete",oldValue:t,newValue:n}:j(t,n)}export{it as B,ot as E,nt as I,F as J,_ as M,P as R,lt as U,st as W,J as a,ut as b,K as c,ct as d,Q as f,tt as m,et as p,at as s,rt as v,Z as y,N as z};
