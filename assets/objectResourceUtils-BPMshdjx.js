const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/loader-D-ZT0R_F.js","assets/index-BdXiYUWp.js","assets/index-DGW5n9KZ.css","assets/mat4f64-CSKppSlJ.js","assets/enums-V7VQdXj3.js","assets/Version-CbmqbzHg.js","assets/mat4-BmVJLnp_.js","assets/common-DokbeE9L.js","assets/quat-DBcihcjk.js","assets/mat3f64-q3fE-ZOt.js","assets/quatf64-aQ5IuZRd.js","assets/vec32-CJnU2VkQ.js","assets/vec42-CwZz9wN3.js","assets/BufferView-CxDm5c8B.js","assets/vec2-DeTgPWAI.js","assets/resourceUtils-Ce1DuR--.js","assets/basicInterfaces-CZwQPxTp.js"])))=>i.map(i=>d[i]);
import{aG as G,dE as Me,eY as Oe,dK as ie,L as pe,U as Re,a6 as ge,t as Be,eZ as xe,ei as K,s as Ee,_ as Ce,cX as oe}from"./index-BdXiYUWp.js";import{a as Pe}from"./devEnvironmentUtils-CnNDiFMM.js";import{i as ae,j as Se,n as Le}from"./mat3-BBgb1kkc.js";import{t as ee,e as be}from"./mat3f64-q3fE-ZOt.js";import{h as Ne}from"./mat4-BmVJLnp_.js";import{o as ue,r as Fe,e as Ge}from"./mat4f64-CSKppSlJ.js";import{l as Ue}from"./vec2f64-DA6GkJuH.js";import{o as S,u as E,g as L,W as ke,E as re,c as je,i as le,r as qe,A as De,I as He}from"./vec32-CJnU2VkQ.js";import{S as Ve,r as ze,e as V,o as We,a as Ke,C as ye,t as Qe,B as Q,b as Xe,n as Ye,c as Ze,d as z,s as Je,f as et}from"./triangle-BaXPaMqA.js";import{i as $e,x as we,c as tt,L as rt,O as st,E as nt}from"./BufferView-CxDm5c8B.js";import{e as it,f as ot,l as ce,o as fe}from"./vec3-Cd4aRkCw.js";import{n as at,s as me}from"./vec4-BPpDwnDe.js";import{n as ut,d as U,o as lt,g as ct,t as ft,h as mt}from"./DefaultMaterial_COLOR_GAMMA-B1DxFAcH.js";import{r as te}from"./resourceUtils-Ce1DuR--.js";import{i as ht,f as dt}from"./vec2f32-BbH2jxlN.js";import{r as ve}from"./Version-CbmqbzHg.js";import{t as pt,l as Te}from"./Indices-Bp5GVgBU.js";import{t as j}from"./orientedBoundingBox-BoNRQ5mS.js";import{t as gt,e as se,i as M,n as xt}from"./basicInterfaces-CZwQPxTp.js";import{s as bt}from"./Util-C7Fs-K_J.js";import{e as I}from"./VertexAttribute-BdZWZuT1.js";import{D as he}from"./enums-V7VQdXj3.js";import{a as de}from"./NormalAttribute.glsl-B9jrHia4.js";import"./common-DokbeE9L.js";import"./Texture-BiQDiQ_1.js";import"./InterleavedLayout-Cs0IWIRL.js";import"./types-D0PSWh4d.js";import"./compilerUtils-B5rIYOON.js";import"./BindType-BmZEZMMh.js";import"./AlphaCutoff-UcccL64p.js";import"./boundedPlane-Dxkis2_7.js";import"./sphere-D8riOPwk.js";import"./vec42-CwZz9wN3.js";import"./vec4f64-CMoMXWBi.js";import"./plane-CN4FxKlO.js";import"./quatf64-aQ5IuZRd.js";import"./lineSegment-_PPub8s-.js";import"./lengthUtils-CE2XSnNx.js";import"./time-ClENgjgA.js";import"./vec2-DeTgPWAI.js";import"./projectBuffer-CHV26hzf.js";import"./quat-DBcihcjk.js";import"./spatialReferenceEllipsoidUtils-B--TIENP.js";import"./computeTranslationToOriginAndRotation-D6Hwu015.js";function yt(n,e){if(!n)return!1;const{size:t,data:r,indices:l}=n;S(e,0,0,0),S(T,0,0,0);let u=0,i=0;for(let o=0;o<l.length-2;o+=3){const c=l[o]*t,s=l[o+1]*t,a=l[o+2]*t;S(g,r[c],r[c+1],r[c+2]),S(C,r[s],r[s+1],r[s+2]),S(W,r[a],r[a+1],r[a+2]);const f=Ve(g,C,W);f?(E(g,g,C),E(g,g,W),L(g,g,1/3*f),E(e,e,g),u+=f):(E(T,T,g),E(T,T,C),E(T,T,W),i+=3)}return(i!==0||u!==0)&&(u!==0?(L(e,e,1/u),!0):i!==0&&(L(e,T,1/i),!0))}function $t(n,e){if(!n)return!1;const{size:t,data:r,indices:l}=n;S(e,0,0,0);let u=-1,i=0;for(let o=0;o<l.length;o++){const c=l[o]*t;u!==c&&(e[0]+=r[c],e[1]+=r[c+1],e[2]+=r[c+2],i++),u=c}return i>1&&L(e,e,1/i),i>0}function wt(n,e,t){if(!n)return!1;S(t,0,0,0),S(T,0,0,0);let r=0,l=0;const{size:u,data:i,indices:o}=n,c=o.length-1,s=c+(e?2:0);for(let a=0;a<s;a+=2){const f=a<c?a+1:0,m=o[a<c?a:c]*u,h=o[f]*u;g[0]=i[m],g[1]=i[m+1],g[2]=i[m+2],C[0]=i[h],C[1]=i[h+1],C[2]=i[h+2],L(g,E(g,g,C),.5);const d=ke(g,C);d>0?(E(t,t,L(g,g,d)),r+=d):r===0&&(E(T,T,g),l++)}return r!==0?(L(t,t,1/r),!0):l!==0&&(L(t,T,1/l),!0)}const g=G(),C=G(),W=G(),T=G();class vt{constructor(){this.uid=Me()}}class Tt extends vt{constructor(e){super(),this.highlightGroupName=e,this.channel=gt.Highlight}}class X extends ze{constructor(e,t,r=null,l=V.Mesh,u=null,i=-1){super(),this.material=e,this.mapPositions=r,this.type=l,this.objectAndLayerIdColor=u,this.edgeIndicesLength=i,this.highlights=new Set,this._highlightGroupCounts=new Map,this.visible=!0,this._attributes=new Map,this._boundingInfo=null;for(const[o,c]of t)this._attributes.set(o,{...c,indices:pt(c.indices)}),o===I.POSITION&&(this.edgeIndicesLength=this.edgeIndicesLength<0?this._attributes.get(o).indices.length:this.edgeIndicesLength)}instantiate(e={}){const t=new X(e.material||this.material,[],this.mapPositions,this.type,this.objectAndLayerIdColor,this.edgeIndicesLength);return this._attributes.forEach((r,l)=>{r.exclusive=!1,t._attributes.set(l,r)}),t._boundingInfo=this._boundingInfo,t.transformation=e.transformation||this.transformation,t}get attributes(){return this._attributes}getMutableAttribute(e){let t=this._attributes.get(e);return t&&!t.exclusive&&(t={...t,exclusive:!0,data:We(t.data)},this._attributes.set(e,t)),t}setAttributeData(e,t){const r=this._attributes.get(e);r&&this._attributes.set(e,{...r,exclusive:!0,data:t})}get indexCount(){const e=this._attributes.values().next().value.indices;return(e==null?void 0:e.length)??0}get faceCount(){return this.indexCount/3}get boundingInfo(){return this._boundingInfo==null&&(this._boundingInfo=this._calculateBoundingInfo()),this._boundingInfo}computeAttachmentOrigin(e){return!!(this.type===V.Mesh?this._computeAttachmentOriginTriangles(e):this.type===V.Line?this._computeAttachmentOriginLines(e):this._computeAttachmentOriginPoints(e))&&(this._transformation!=null&&re(e,e,this._transformation),!0)}_computeAttachmentOriginTriangles(e){const t=this.attributes.get(I.POSITION);return yt(t,e)}_computeAttachmentOriginLines(e){const t=this.attributes.get(I.POSITION);return wt(t,It(this.material.parameters,t),e)}_computeAttachmentOriginPoints(e){const t=this.attributes.get(I.POSITION);return $t(t,e)}invalidateBoundingInfo(){this._boundingInfo=null}_calculateBoundingInfo(){const e=this.attributes.get(I.POSITION);if(!e||e.indices.length===0)return null;const t=this.type===V.Mesh?3:1;bt(e.indices.length%t==0,"Indexing error: "+e.indices.length+" not divisible by "+t);const r=Te(e.indices.length/t);return new Ke(r,t,e)}get transformation(){return this._transformation??ue}set transformation(e){this._transformation=e&&e!==ue?Fe(e):null}get highlightGroups(){return this._highlightGroupCounts}get hasHighlights(){return this._highlightGroupCounts.size>0}foreachHighlightGroup(e){this._highlightGroupCounts.forEach((t,r)=>e(r))}allocateIdAndHighlight(e){const t=new Tt(e);return this.addHighlight(t)}addHighlight(e){this.highlights.add(e);const{highlightGroupName:t}=e,r=(this._highlightGroupCounts.get(t)??0)+1;return this._highlightGroupCounts.set(t,r),e}removeHighlight(e){if(this.highlights.delete(e)){const{highlightGroupName:t}=e,r=this._highlightGroupCounts.get(t)??0;r<=1?this._highlightGroupCounts.delete(t):this._highlightGroupCounts.set(t,r-1)}}}function It(n,e){return!(!("isClosed"in n)||!n.isClosed)&&e.indices.length>2}function D(n){if(n==null)return null;const e=n.offset!=null?n.offset:ht,t=n.rotation!=null?n.rotation:0,r=n.scale!=null?n.scale:dt,l=ee(1,0,0,0,1,0,e[0],e[1],1),u=ee(Math.cos(t),-Math.sin(t),0,Math.sin(t),Math.cos(t),0,0,0,1),i=ee(r[0],0,0,0,r[1],0,0,0,1),o=be();return ae(o,u,i),ae(o,l,o),o}class At{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class _t{constructor(e,t,r){this.name=e,this.lodThreshold=t,this.pivotOffset=r,this.stageResources=new At,this.numberOfVertices=0}}const B=()=>Be.getLogger("esri.views.3d.layers.graphics.objectResourceUtils");async function Mt(n,e){const t=await Ot(n,e),r=await Pt(t.textureDefinitions??{},e);let l=0;for(const u in r)if(r.hasOwnProperty(u)){const i=r[u];l+=i!=null&&i.image?i.image.width*i.image.height*4:0}return{resource:t,textures:r,size:l+Oe(t)}}async function Ot(n,e){const t=e==null?void 0:e.streamDataRequester;if(t)return Rt(n,t,e);const r=await pe(Re(n,e));if(r.ok===!0)return r.value.data;ge(r.error),Ie(r.error)}async function Rt(n,e,t){const r=await pe(e.request(n,"json",t));if(r.ok===!0)return r.value;ge(r.error),Ie(r.error.details.url)}function Ie(n){throw new Ee("",`Request for object resource failed: ${n}`)}function Bt(n){const e=n.params,t=e.topology;let r=!0;switch(e.vertexAttributes||(B().warn("Geometry must specify vertex attributes"),r=!1),e.topology){case"PerAttributeArray":break;case"Indexed":case null:case void 0:{const u=e.faces;if(u){if(e.vertexAttributes)for(const i in e.vertexAttributes){const o=u[i];o!=null&&o.values?(o.valueType!=null&&o.valueType!=="UInt32"&&(B().warn(`Unsupported indexed geometry indices type '${o.valueType}', only UInt32 is currently supported`),r=!1),o.valuesPerElement!=null&&o.valuesPerElement!==1&&(B().warn(`Unsupported indexed geometry values per element '${o.valuesPerElement}', only 1 is currently supported`),r=!1)):(B().warn(`Indexed geometry does not specify face indices for '${i}' attribute`),r=!1)}}else B().warn("Indexed geometries must specify faces"),r=!1;break}default:B().warn(`Unsupported topology '${t}'`),r=!1}n.params.material||(B().warn("Geometry requires material"),r=!1);const l=n.params.vertexAttributes;for(const u in l)l[u].values||(B().warn("Geometries with externally defined attributes are not yet supported"),r=!1);return r}function Et(n,e){var d,$;const t=new Array,r=new Array,l=new Array,u=new Qe,i=n.resource,o=ve.parse(i.version||"1.0","wosr");Lt.validate(o);const c=i.model.name,s=i.model.geometries,a=i.materialDefinitions??{},f=n.textures;let m=0;const h=new Map;for(let p=0;p<s.length;p++){const x=s[p];if(!Bt(x))continue;const A=St(x),w=x.params.vertexAttributes,q=[],Y=b=>{if(x.params.topology==="PerAttributeArray")return null;const _=x.params.faces;for(const R in _)if(R===b)return _[R].values;return null},N=w[I.POSITION],H=N.values.length/N.valuesPerElement;for(const b in w){const _=w[b],R=_.values,J=Y(b)??Te(H);q.push([b,new j(R,J,_.valuesPerElement,!0)])}const O=A.texture,y=f&&f[O];if(y&&!h.has(O)){const{image:b,parameters:_}=y,R=new ye(b,_);r.push(R),h.set(O,R)}const F=h.get(O),Z=F?F.id:void 0,P=A.material;let v=u.get(P,O);if(v==null){const b=a[P.slice(P.lastIndexOf("/")+1)].params;b.transparency===1&&(b.transparency=0);const _=y&&y.alphaChannelUsage,R=b.transparency>0||_==="transparency"||_==="maskAndTransparency",J=y?Ae(y.alphaChannelUsage):void 0,ne={ambient:ie(b.diffuse),diffuse:ie(b.diffuse),opacity:1-(b.transparency||0),transparent:R,textureAlphaMode:J,textureAlphaCutoff:.33,textureId:Z,initTextureTransparent:!0,doubleSided:!0,cullFace:se.None,colorMixMode:b.externalColorMixMode||"tint",textureAlphaPremultiplied:(y==null?void 0:y.parameters.preMultiplyAlpha)??!1};e!=null&&e.materialParameters&&Object.assign(ne,e.materialParameters),v=new Q(ne,e),u.set(P,O,v)}l.push(v);const _e=new X(v,q);m+=(($=(d=q.find(b=>b[0]===I.POSITION))==null?void 0:d[1])==null?void 0:$.indices.length)??0,t.push(_e)}return{engineResources:[{name:c,stageResources:{textures:r,materials:l,geometries:t},pivotOffset:i.model.pivotOffset,numberOfVertices:m,lodThreshold:null}],referenceBoundingBox:Ct(t)}}function Ct(n){const e=xe();return n.forEach(t=>{const r=t.boundingInfo;r!=null&&(K(e,r.bbMin),K(e,r.bbMax))}),e}async function Pt(n,e){const t=new Array;for(const u in n){const i=n[u],o=i.images[0].data;if(!o){B().warn("Externally referenced texture data is not yet supported");continue}const c=i.encoding+";base64,"+o,s="/textureDefinitions/"+u,a=i.channels==="rgba"?i.alphaChannelUsage||"transparency":"none",f={noUnpackFlip:!0,wrap:{s:he.REPEAT,t:he.REPEAT},preMultiplyAlpha:Ae(a)!==M.Opaque},m=e!=null&&e.disableTextures?Promise.resolve(null):Xe(c,e);t.push(m.then(h=>({refId:s,image:h,parameters:f,alphaChannelUsage:a})))}const r=await Promise.all(t),l={};for(const u of r)l[u.refId]=u;return l}function Ae(n){switch(n){case"mask":return M.Mask;case"maskAndTransparency":return M.MaskBlend;case"none":return M.Opaque;default:return M.Blend}}function St(n){const e=n.params;return{id:1,material:e.material,texture:e.texture,region:e.texture}}const Lt=new ve(1,2,"wosr");async function Cr(n,e){var f;const t=Nt(Pe(n));if(t.fileType==="wosr"){const m=await(e.cache?e.cache.loadWOSR(t.url,e):Mt(t.url,e)),{engineResources:h,referenceBoundingBox:d}=Et(m,e);return{lods:h,referenceBoundingBox:d,isEsriSymbolResource:!1,isWosr:!0}}let r;if(e.cache)r=await e.cache.loadGLTF(t.url,e,!!e.usePBR);else{const{loadGLTF:m}=await Ce(()=>import("./loader-D-ZT0R_F.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]));r=await m(new ut(e.streamDataRequester),t.url,e,e.usePBR)}const l=(f=r.model.meta)==null?void 0:f.ESRI_proxyEllipsoid,u=r.meta.isEsriSymbolResource&&l!=null&&r.meta.ESRI_webstyle==="EsriRealisticTreesStyle";u&&!r.customMeta.esriTreeRendering&&(r.customMeta.esriTreeRendering=!0,jt(r,l));const i=!!e.usePBR,o=r.meta.isEsriSymbolResource?{usePBR:i,isSchematic:!1,treeRendering:u,mrrFactors:Je}:{usePBR:i,isSchematic:!1,treeRendering:!1,mrrFactors:et},c={...e.materialParameters,treeRendering:u},{engineResources:s,referenceBoundingBox:a}=Ft(r,o,c,e,t.specifiedLodIndex);return{lods:s,referenceBoundingBox:a,isEsriSymbolResource:r.meta.isEsriSymbolResource,isWosr:!1}}function Nt(n){const e=n.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);return e?{fileType:"gltf",url:e[1],specifiedLodIndex:e[4]!=null?Number(e[4]):null}:n.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:n,specifiedLodIndex:null}:{fileType:"unknown",url:n,specifiedLodIndex:null}}function Ft(n,e,t,r,l){const u=n.model,i=new Array,o=new Map,c=new Map,s=u.lods.length,a=xe();return u.lods.forEach((f,m)=>{const h=r.skipHighLods===!0&&(s>1&&m===0||s>3&&m===1)||r.skipHighLods===!1&&l!=null&&m!==l;if(h&&m!==0)return;const d=new _t(f.name,f.lodThreshold,[0,0,0]);f.parts.forEach($=>{const p=h?new Q({},r):Gt(u,$,d,e,t,o,c,r),{geometry:x,vertexCount:A}=Ut($,p??new Q({},r)),w=x.boundingInfo;w!=null&&m===0&&(K(a,w.bbMin),K(a,w.bbMax)),p!=null&&(d.stageResources.geometries.push(x),d.numberOfVertices+=A)}),h||i.push(d)}),{engineResources:i,referenceBoundingBox:a}}function Gt(n,e,t,r,l,u,i,o){var d,$;const c=e.material+(e.attributes.normal?"_normal":"")+(e.attributes.color?"_color":"")+(e.attributes.texCoord0?"_texCoord0":"")+(e.attributes.tangent?"_tangent":""),s=n.materials.get(e.material),a=e.attributes.texCoord0!=null,f=e.attributes.normal!=null;if(s==null)return null;const m=kt(s.alphaMode);if(!u.has(c)){if(a){const y=(F,Z=!1)=>{if(F!=null&&!i.has(F)){const P=n.textures.get(F);if(P!=null){const v=P.data;i.set(F,new ye(te(v)?v.data:v,{...P.parameters,preMultiplyAlpha:!te(v)&&Z,encoding:te(v)&&v.encoding!=null?v.encoding:void 0}))}}};y(s.textureColor,m!==M.Opaque),y(s.textureNormal),y(s.textureOcclusion),y(s.textureEmissive),y(s.textureMetallicRoughness)}const p=s.color[0]**(1/U),x=s.color[1]**(1/U),A=s.color[2]**(1/U),w=s.emissiveFactor[0]**(1/U),q=s.emissiveFactor[1]**(1/U),Y=s.emissiveFactor[2]**(1/U),N=s.textureColor!=null&&a?i.get(s.textureColor):null,H=Ye({normalTexture:s.textureNormal,metallicRoughnessTexture:s.textureMetallicRoughness,metallicFactor:s.metallicFactor,roughnessFactor:s.roughnessFactor,emissiveTexture:s.textureEmissive,emissiveFactor:s.emissiveFactor,occlusionTexture:s.textureOcclusion}),O=((d=s.normalTextureTransform)==null?void 0:d.scale)!=null?($=s.normalTextureTransform)==null?void 0:$.scale:Ue;u.set(c,new Q({...r,transparent:m===M.Blend,customDepthTest:xt.Lequal,textureAlphaMode:m,textureAlphaCutoff:s.alphaCutoff,diffuse:[p,x,A],ambient:[p,x,A],opacity:s.opacity,doubleSided:s.doubleSided,doubleSidedType:"winding-order",cullFace:s.doubleSided?se.None:se.Back,hasVertexColors:!!e.attributes.color,hasVertexTangents:!!e.attributes.tangent,normalType:f?de.Attribute:de.ScreenDerivative,castShadows:!0,receiveShadows:s.receiveShadows,receiveAmbientOcclusion:s.receiveAmbientOcclustion,textureId:N!=null?N.id:void 0,colorMixMode:s.colorMixMode,normalTextureId:s.textureNormal!=null&&a?i.get(s.textureNormal).id:void 0,textureAlphaPremultiplied:N!=null&&!!N.parameters.preMultiplyAlpha,occlusionTextureId:s.textureOcclusion!=null&&a?i.get(s.textureOcclusion).id:void 0,emissiveTextureId:s.textureEmissive!=null&&a?i.get(s.textureEmissive).id:void 0,metallicRoughnessTextureId:s.textureMetallicRoughness!=null&&a?i.get(s.textureMetallicRoughness).id:void 0,emissiveFactor:[w,q,Y],mrrFactors:H?Ze:[s.metallicFactor,s.roughnessFactor,r.mrrFactors[2]],isSchematic:H,colorTextureTransformMatrix:D(s.colorTextureTransform),normalTextureTransformMatrix:D(s.normalTextureTransform),scale:[O[0],O[1]],occlusionTextureTransformMatrix:D(s.occlusionTextureTransform),emissiveTextureTransformMatrix:D(s.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:D(s.metallicRoughnessTextureTransform),...l},o))}const h=u.get(c);if(t.stageResources.materials.push(h),a){const p=x=>{x!=null&&t.stageResources.textures.push(i.get(x))};p(s.textureColor),p(s.textureNormal),p(s.textureOcclusion),p(s.textureEmissive),p(s.textureMetallicRoughness)}return h}function Ut(n,e){const t=n.attributes.position.count,r=lt(n.indices||t,n.primitiveType),l=z(3*t),{typedBuffer:u,typedBufferStride:i}=n.attributes.position;it(l,u,n.transform,3,i);const o=[[I.POSITION,new j(l,r,3,!0)]];if(n.attributes.normal!=null){const s=z(3*t),{typedBuffer:a,typedBufferStride:f}=n.attributes.normal;Se(k,n.transform),ot(s,a,k,3,f),oe(k)&&ce(s,s),o.push([I.NORMAL,new j(s,r,3,!0)])}if(n.attributes.tangent!=null){const s=z(4*t),{typedBuffer:a,typedBufferStride:f}=n.attributes.tangent;Le(k,n.transform),at(s,a,k,4,f),oe(k)&&ce(s,s,4),o.push([I.TANGENT,new j(s,r,4,!0)])}if(n.attributes.texCoord0!=null){const s=z(2*t),{typedBuffer:a,typedBufferStride:f}=n.attributes.texCoord0;ct(s,a,2,f),o.push([I.UV0,new j(s,r,2,!0)])}const c=n.attributes.color;if(c!=null){const s=new Uint8Array(4*t);c.elementCount===4?c instanceof tt?me(s,c,255):c instanceof we?ft(s,c):c instanceof rt&&me(s,c,1/256):(s.fill(255),c instanceof $e?fe(s,c.typedBuffer,255,4,c.typedBufferStride):n.attributes.color instanceof st?mt(s,c.typedBuffer,4,n.attributes.color.typedBufferStride):n.attributes.color instanceof nt&&fe(s,c.typedBuffer,1/256,4,c.typedBufferStride)),o.push([I.COLOR,new j(s,r,4,!0)])}return{geometry:new X(e,o),vertexCount:t}}const k=be();function kt(n){switch(n){case"BLEND":return M.Blend;case"MASK":return M.Mask;case"OPAQUE":case null:case void 0:return M.Opaque}}function jt(n,e){for(let t=0;t<n.model.lods.length;++t){const r=n.model.lods[t];for(const l of r.parts){const u=l.attributes.normal;if(u==null)return;const i=l.attributes.position,o=i.count,c=G(),s=G(),a=G(),f=new Uint8Array(4*o),m=new Float64Array(3*o),h=Ne(Ge(),l.transform);let d=0,$=0;for(let p=0;p<o;p++){i.getVec(p,s),u.getVec(p,c),re(s,s,l.transform),je(a,s,e.center),le(a,a,e.radius);const x=a[2],A=qe(a),w=Math.min(.45+.55*A*A,1);le(a,a,e.radius),h!==null&&re(a,a,h),De(a,a),t+1!==n.model.lods.length&&n.model.lods.length>1&&He(a,a,c,x>-1?.2:Math.min(-4*x-3.8,1)),m[d]=a[0],m[d+1]=a[1],m[d+2]=a[2],d+=3,f[$]=255*w,f[$+1]=255*w,f[$+2]=255*w,f[$+3]=255,$+=4}l.attributes.normal=new $e(m),l.attributes.color=new we(f)}}}export{Cr as fetch,Nt as parseUrl};
