const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/geometryEngineBase-B0ZyeKAX.js","assets/_commonjsHelpers-DCkdB7M8.js","assets/hydrated-BZTq-QB6.js","assets/index-DMwY2Yeh.js","assets/index-DGW5n9KZ.css"])))=>i.map(i=>d[i]);
import{aG as B,e8 as rn,_ as b,a4 as on,e9 as ln,aV as an,ea as un,dz as W,g as O,ac as C,bn as g,aj as L,j as cn,w as fn,v as hn,d as pn,u as dn,s as mn,bi as K,bQ as D,cZ as V,ak as R,aW as F}from"./index-DMwY2Yeh.js";import{n as Z,G as gn,E as wn}from"./projectBuffer-CWX1J5rk.js";import{o as _n}from"./zscale-DcxcvFoT.js";function q(t,e,n,s,i,r){return G[0]=t,G[1]=e,G[2]=n,Z(G,s,0,i,r,0)}const G=B();let S=0;class k{static fromGE(e){const n=new k;return n._wkt=e.wkt,n._wkid=e.wkid,n._isInverse=e.isInverse,n}constructor(e){this.uid=S++,e?(this._wkt=e.wkt!=null?e.wkt:null,this._wkid=e.wkid!=null?e.wkid:-1,this._isInverse=e.isInverse!=null&&e.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}get wkt(){return this._wkt}set wkt(e){this._wkt=e,this.uid=S++}get wkid(){return this._wkid}set wkid(e){this._wkid=e,this.uid=S++}get isInverse(){return this._isInverse}set isInverse(e){this._isInverse=e,this.uid=S++}getInverse(){const e=new k;return e._wkt=this.wkt,e._wkid=this._wkid,e._isInverse=!this.isInverse,e}}class m{static cacheKey(e,n){var s,i,r,o,a,l;return[((s=e.wkid)==null?void 0:s.toString())??"-1",((i=e.wkt)==null?void 0:i.toString())??"",((r=e.wkt2)==null?void 0:r.toString())??"",((o=n.wkid)==null?void 0:o.toString())??"-1",((a=n.wkt)==null?void 0:a.toString())??"",((l=n.wkt2)==null?void 0:l.toString())??""].join()}static fromGE(e){const n=new m;let s="";for(const i of e.steps){const r=k.fromGE(i);n.steps.push(r),s+=r.uid.toString()+","}return n._cachedProjection={},n._gtlistentry=null,n._chain=s,n}constructor(e){if(this.steps=[],this._cachedProjection={},this._chain="",this._gtlistentry=null,e==null?void 0:e.steps)for(const n of e.steps)n instanceof k?this.steps.push(n):this.steps.push(new k({wkid:n.wkid,wkt:n.wkt,isInverse:n.isInverse}))}getInverse(){const e=new m;e.steps=[];for(let n=this.steps.length-1;n>=0;n--){const s=this.steps[n];e.steps.push(s.getInverse())}return e}getGTListEntry(){let e="";for(const n of this.steps)e+=n.uid.toString()+",";return e!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=e),this._gtlistentry}assignCachedGe(e,n,s){this._cachedProjection[m.cacheKey(e,n)]=s}getCachedGeTransformation(e,n){let s="";for(const r of this.steps)s+=r.uid.toString()+",";s!==this._chain&&(this._gtlistentry=null,this._cachedProjection={},this._chain=s);const i=this._cachedProjection[m.cacheKey(e,n)];return i===void 0?null:i}}let d=null,w=null,v=null,z={};const A=new an;function I(){return!!d&&un()}function Q(){return!!I()||(F(A),j(),!1)}function yn(t,e){return!t||!e||_(t,e)||Q()}function kn(t,e){return!_(t,e)&&!I()}function j(t){return v==null&&(v=Promise.all([rn(),b(()=>import("./geometryEngineBase-B0ZyeKAX.js"),__vite__mapDeps([0,1])).then(e=>e.g),b(()=>import("./hydrated-BZTq-QB6.js"),__vite__mapDeps([2,3,4]))])),v.then(([,e,{hydratedAdapter:n}])=>{on(t),w=n,d=e.default,d._enableProjection(ln),A.notify()})}function H(t,e,n=null,s=null){return Array.isArray(t)?t.length===0?[]:T(w,t,t[0].spatialReference,e,n,s):T(w,[t],t.spatialReference,e,n,s)[0]}function T(t,e,n,s,i=null,r=null){if(n==null||s==null)return e;if(_(n,s,i))return e.map(o=>M(o,n,s));if(i==null&&W(n))return e.map(o=>M(o,n,O.WGS84)).map(o=>x(o,s));if(i==null&&W(s))return e.map(o=>x(o,O.WGS84)).map(o=>M(o,O.WGS84,s));if(i==null){const o=m.cacheKey(n,s);z[o]!==void 0?i=z[o]:((i=N(n,s,void 0))==null&&(i=new m),z[o]=i)}if(d==null||t==null)throw new $;return r!=null?d._project(t,e,n,s,i,r):d._project(t,e,n,s,i)}function Rn(t,e){const n=J([t],e);return n.pending!=null?{pending:n.pending,geometry:null}:n.geometries!=null?{pending:null,geometry:n.geometries[0]}:{pending:null,geometry:null}}function J(t,e){if(!I()){for(const n of t)if(n!=null&&!L(n.spatialReference,e)&&g(n.spatialReference)&&g(e)&&!_(n.spatialReference,e))return F(A),{pending:j(),geometries:null}}return{pending:null,geometries:t.map(n=>n==null?null:L(n.spatialReference,e)?n:g(n.spatialReference)&&g(e)?x(n,e):null)}}function N(t,e,n=null){if(t==null||e==null)return null;if(d==null||w==null)throw new $;const s=d._getTransformation(w,t,e,n,n==null?void 0:n.spatialReference);return s!==null?m.fromGE(s):null}function vn(t,e,n=null){if(d==null||w==null)throw new $;const s=d._getTransformationBySuitability(w,t,e,n,n==null?void 0:n.spatialReference);if(s!==null){const i=[];for(const r of s)i.push(m.fromGE(r));return i}return[]}class $ extends mn{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function jn(){d=null,w=null,v=null,z={}}const xn={get loadPromise(){return v}};function x(t,e){try{const n=H(t,e);if(n==null)return null;"xmin"in t&&"xmin"in n&&(n.zmin=t.zmin,n.zmax=t.zmax);const s=_n(n.type,t.spatialReference,e);return s!=null&&s(n),n}catch(n){if(!(n instanceof $))throw n;return null}}async function In(t,e,n){const s=t.spatialReference;return s!=null&&e!=null&&await U(s,e,null,n),x(t,e)}function _(t,e,n){return!n&&(!!L(t,e)||g(t)&&g(e)&&!!gn(t,e,wn))}function Pn(t,e){if(L(t,e))return!0;if(!g(t)||!g(e))return!1;const n=K(t)||D(t)||V(t),s=K(e)||D(e)||V(e);return n&&s}async function U(t,e,n,s){if(I())return C(s);if(Array.isArray(t)){for(const{source:i,dest:r,geographicTransformation:o}of t)if(i&&r&&!_(i,r,o))return j(s)}else if(t&&e&&!_(t,e,n))return j(s);return C(s)}function M(t,e,n){return t?"x"in t?X(t,e,new cn,n,0):"xmin"in t?tn(t,e,new fn,n,0):"rings"in t?en(t,e,new hn,n,0):"paths"in t?nn(t,e,new pn,n,0):"points"in t?Y(t,e,new dn,n,0):null:null}function En(t,e,n=e.spatialReference,s=0){return n!=null&&t.spatialReference!=null&&X(t,t.spatialReference,e,n,s)!=null}function X(t,e,n,s,i){u[0]=t.x,u[1]=t.y;const r=t.z;return u[2]=r!==void 0?r:i,Z(u,e,0,u,s,0)?(n.x=u[0],n.y=u[1],n.spatialReference=s,r!==void 0||R(s)?(n.z=u[2],n.hasZ=!0):(n.z=void 0,n.hasZ=!1),t.m===void 0?(n.m=void 0,n.hasM=!1):(n.m=t.m,n.hasM=!0),n):null}function Gn(t,e,n=e.spatialReference,s=0){return t.spatialReference!=null&&n!=null&&Y(t,t.spatialReference,e,n,s)!=null}function Y(t,e,n,s,i){const{points:r,hasZ:o,hasM:a}=t,l=[],h=r.length,p=[];for(const c of r)p.push(c[0],c[1],o?c[2]:i);if(!Z(p,e,0,p,s,0,h))return null;const f=o||R(s);for(let c=0;c<h;++c){const y=3*c,P=p[y],E=p[y+1];f&&a?l.push([P,E,p[y+2],r[c][3]]):f?l.push([P,E,p[y+2]]):a?l.push([P,E,r[c][2]]):l.push([P,E])}return n.points=l,n.spatialReference=s,n.hasZ=o,n.hasM=a,n}function Sn(t,e,n=e.spatialReference,s=0){return t.spatialReference!=null&&n!=null&&nn(t,t.spatialReference,e,n,s)!=null}function nn(t,e,n,s,i){const{paths:r,hasZ:o,hasM:a}=t,l=[];if(!sn(r,o??!1,a??!1,e,l,s,i))return null;const h=o||R(s);return n.paths=l,n.spatialReference=s,n.hasZ=h,n.hasM=a,n}function zn(t,e,n=e.spatialReference,s=0){return t.spatialReference!=null&&n!=null&&en(t,t.spatialReference,e,n,s)!=null}function en(t,e,n,s,i){const{rings:r,hasZ:o,hasM:a}=t,l=[];if(!sn(r,o??!1,a??!1,e,l,s,i))return null;const h=o||R(s);return n.rings=l,n.spatialReference=s,n.hasZ=h,n.hasM=a,n}function Mn(t,e,n=e.spatialReference,s=0){return t.spatialReference!=null&&n!=null&&tn(t,t.spatialReference,e,n,s)!=null}function tn(t,e,n,s,i){const{xmin:r,ymin:o,xmax:a,ymax:l,hasZ:h,hasM:p}=t,f=h?t.zmin:i;if(!q(r,o,f,e,u,s))return null;const c=h||R(s);n.xmin=u[0],n.ymin=u[1],c&&(n.zmin=u[2]);const y=h?t.zmax:i;return q(a,l,y,e,u,s)?(n.xmax=u[0],n.ymax=u[1],c&&(n.zmax=u[2]),p&&(n.mmin=t.mmin,n.mmax=t.mmax),n.spatialReference=s,n):null}function sn(t,e,n,s,i,r,o=0){const a=new Array;for(const p of t)for(const f of p)a.push(f[0],f[1],e?f[2]:o);if(!Z(a,s,0,a,r,0))return!1;let l=0;i.length=0;const h=e||R(r);for(const p of t){const f=new Array;for(const c of p)h&&n?f.push([a[l++],a[l++],a[l++],c[3]]):h?f.push([a[l++],a[l++],a[l++]]):n?(f.push([a[l++],a[l++],c[2]]),l++):(f.push([a[l++],a[l++]]),l++);i.push(f)}return!0}const u=B(),On=Object.freeze(Object.defineProperty({__proto__:null,canProjectWithoutEngine:_,getTransformation:N,getTransformations:vn,initializeProjection:U,isEqualBaseGCS:Pn,isLoaded:I,isLoadedOrLoad:Q,isLoadedOrLoadFor:yn,load:j,project:H,projectExtent:Mn,projectMany:T,projectMultipoint:Gn,projectOrLoad:Rn,projectOrLoadMany:J,projectPoint:En,projectPolygon:zn,projectPolyline:Sn,projectWithZConversion:In,projectWithoutEngine:M,requiresLoad:kn,test:xn,tryProjectWithZConversion:x,unload:jn},Symbol.toStringTag,{value:"Module"}));export{x as H,_ as J,H as K,Pn as L,U as N,T as O,M as Q,Rn as V,j as W,J as X,N as Y,I as _,zn as o,On as p,m as s};
