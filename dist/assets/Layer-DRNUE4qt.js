const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/portalLayers-DP1nfH4W.js","assets/index-BdXiYUWp.js","assets/index-DGW5n9KZ.css","assets/associatedFeatureServiceUtils-CJqlnkWJ.js","assets/arcgisLayerUrl-z_cta6mh.js","assets/PortalItem-B5IuGMHV.js","assets/fetchService-By_PgsC8.js","assets/layerUtils-CRmrchQW.js","assets/portalItemUtils-oCxJF8hd.js","assets/projection-sPm_KXQG.js","assets/projectBuffer-CHV26hzf.js","assets/zscale-Q26ExEVF.js","assets/arcgisLayers-BMPDhHuB.js"])))=>i.map(i=>d[i]);
import{ex as b,ca as h,M as _,X as n,a2 as y,dD as d,ey as I,ez as L,c3 as c,cb as A,b5 as w,eA as x,eB as N,_ as $,a7 as R,t as M,aL as J,bW as T,K as V,w as U,g as O,a5 as B,I as P,U as k,s as F,Z as p}from"./index-BdXiYUWp.js";import{p as W}from"./TimeExtent-DKc53fFR.js";class S{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(b),this._values=new Map,this.multipleOriginsSupported=!0}clone(t){const e=new S,r=this._originStores[h.DEFAULTS];r&&r.forEach((s,o)=>{e.set(o,_(s),h.DEFAULTS)});for(let s=h.SERVICE;s<b;s++){const o=this._originStores[s];o&&o.forEach((l,u)=>{t&&t.has(u)||e.set(u,_(l),s)})}return e}get(t,e){const r=e===void 0?this._values:this._originStores[e];return r?r.get(t):void 0}keys(t){const e=t==null?this._values:this._originStores[t];return e?[...e.keys()]:[]}set(t,e,r=h.USER){let s=this._originStores[r];if(s||(s=new Map,this._originStores[r]=s),s.set(t,e),!this._values.has(t)||this._propertyOriginMap.get(t)<=r){const o=this._values.get(t);return this._values.set(t,e),this._propertyOriginMap.set(t,r),o!==e}return!1}delete(t,e=h.USER){const r=this._originStores[e];if(!r)return;const s=r.get(t);if(r.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===e){this._values.delete(t);for(let o=e-1;o>=0;o--){const l=this._originStores[o];if(l&&l.has(t)){this._values.set(t,l.get(t)),this._propertyOriginMap.set(t,o);break}}}return s}has(t,e){const r=e===void 0?this._values:this._originStores[e];return!!r&&r.has(t)}revert(t,e){for(;e>0&&!this.has(t,e);)--e;const r=this._originStores[e],s=r==null?void 0:r.get(t),o=this._values.get(t);return this._values.set(t,s),this._propertyOriginMap.set(t,e),o!==s}originOf(t){return this._propertyOriginMap.get(t)||h.DEFAULTS}forEach(t){this._values.forEach(t)}}const D=i=>{let t=class extends i{constructor(...e){super(...e);const r=d(this),s=r.store,o=new S;r.store=o,I(r,s,o)}read(e,r){L(this,e,r)}getAtOrigin(e,r){const s=f(this),o=c(r);if(typeof e=="string")return s.get(e,o);const l={};return e.forEach(u=>{l[u]=s.get(u,o)}),l}originOf(e){return A(this.originIdOf(e))}originIdOf(e){return f(this).originOf(e)}revert(e,r){const s=f(this),o=c(r),l=d(this);let u;u=typeof e=="string"?e==="*"?s.keys(o):[e]:e,u.forEach(g=>{l.invalidate(g),s.revert(g,o),l.commit(g)})}};return t=n([y("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function f(i){return d(i).store}let m=class extends D(w){};m=n([y("esri.core.ReadOnlyMultiOriginJSONSupport")],m);const j=i=>{let t=class extends i{constructor(...e){super(...e)}clear(e,r="user"){return v(this).delete(e,c(r))}write(e,r){return x(this,e=e||{},r),e}setAtOrigin(e,r,s){d(this).setAtOrigin(e,r,c(s))}removeOrigin(e){const r=v(this),s=c(e),o=r.keys(s);for(const l of o)r.originOf(l)===s&&r.set(l,r.get(l,s),h.USER)}updateOrigin(e,r){const s=v(this),o=c(r),l=N(this,e);for(let u=o+1;u<b;++u)s.delete(e,u);s.set(e,l,o)}toJSON(e){return this.write({},e)}};return t=n([y("esri.core.MultiOriginJSONSupport.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function v(i){return d(i).store}const G=i=>{let t=class extends j(D(i)){constructor(...e){super(...e)}};return t=n([y("esri.core.MultiOriginJSONSupport")],t),t};let E=class extends G(w){};E=n([y("esri.core.MultiOriginJSONSupport")],E);async function z(i){var r;const t="portalItem"in i?i:{portalItem:i},{fromItem:e}=await $(async()=>{const{fromItem:s}=await import("./portalLayers-DP1nfH4W.js").then(o=>o.p);return{fromItem:s}},__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]));try{return await e(t)}catch(s){const o=t==null?void 0:t.portalItem,l=(o==null?void 0:o.id)||"unset",u=((r=o==null?void 0:o.portal)==null?void 0:r.url)||R.portalUrl;throw M.getLogger("esri.layers.support.fromPortalItem").error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+u+"', id: '"+l+"')",s),s}}let q=0,a=class extends J.EventedMixin(T(V)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new U(-180,-90,180,90,O.WGS84),this.id=Date.now().toString(16)+"-layer-"+q++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.persistenceEnabled=!1,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=O.WGS84,this.title=null,this.type=null,this.url=null,this.visibilityTimeExtent=null,this.visible=!0}static async fromArcGISServerUrl(i){const t=typeof i=="string"?{url:i}:i;return(await $(async()=>{const{fromUrl:e}=await import("./arcgisLayers-BMPDhHuB.js");return{fromUrl:e}},__vite__mapDeps([12,1,2,4,3,5,6,7]))).fromUrl(t)}static fromPortalItem(i){return z(i)}initialize(){this.when().catch(i=>{B(i)||M.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:i})})}destroy(){const i=this.parent;if(i){const t=this;"layers"in i&&i.layers.includes(t)?i.layers.remove(t):"tables"in i&&i.tables.includes(t)?i.tables.remove(t):"baseLayers"in i&&i.baseLayers.includes(t)?i.baseLayers.remove(t):"referenceLayers"in i&&i.referenceLayers.includes(t)&&i.referenceLayers.remove(t),this._set("parent",null)}}get effectiveVisible(){let i=this.visible;const t=this.parent;return i&&t&&"effectiveVisible"in t&&i&&(i=t.effectiveVisible),i}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){return P(this.url)}async fetchAttributionData(){const i=this.attributionDataUrl;if(this.hasAttributionData&&i)return(await k(i,{query:{f:"json"},responseType:"json"})).data;throw new F("layer:no-attribution-data","Layer does not have attribution data")}};n([p({type:String})],a.prototype,"attributionDataUrl",void 0),n([p({readOnly:!0})],a.prototype,"effectiveVisible",null),n([p({type:U})],a.prototype,"fullExtent",void 0),n([p({readOnly:!0})],a.prototype,"hasAttributionData",null),n([p({type:String,clonable:!1})],a.prototype,"id",void 0),n([p({type:Boolean,nonNullable:!0})],a.prototype,"legendEnabled",void 0),n([p({type:["show","hide","hide-children"]})],a.prototype,"listMode",void 0),n([p({type:Number,range:{min:0,max:1},nonNullable:!0})],a.prototype,"opacity",void 0),n([p({clonable:!1})],a.prototype,"parent",void 0),n([p({readOnly:!0})],a.prototype,"parsedUrl",null),n([p({type:Boolean,readOnly:!0})],a.prototype,"persistenceEnabled",void 0),n([p({type:Boolean})],a.prototype,"popupEnabled",void 0),n([p({type:Boolean})],a.prototype,"attributionVisible",void 0),n([p({type:O})],a.prototype,"spatialReference",void 0),n([p({type:String})],a.prototype,"title",void 0),n([p({readOnly:!0,json:{read:!1}})],a.prototype,"type",void 0),n([p()],a.prototype,"url",void 0),n([p({type:W})],a.prototype,"visibilityTimeExtent",void 0),n([p({type:Boolean,nonNullable:!0})],a.prototype,"visible",void 0),a=n([y("esri.layers.Layer")],a);const Z=a;export{G as S,Z as f,E as m};
