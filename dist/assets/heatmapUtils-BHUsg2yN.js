import{cK as Z,cL as A}from"./index-BdXiYUWp.js";import"./vec42-CwZz9wN3.js";import"./vec4f64-CMoMXWBi.js";function T(t){return t?{originPosition:t.originPosition==="upper-left"?"upperLeft":t.originPosition==="lower-left"?"lowerLeft":t.originPosition,scale:t.tolerance?[t.tolerance,t.tolerance,1,1]:[1,1,1,1],translate:t.extent!=null?[t.extent.xmin,t.extent.ymax,t.extent.zmin??0,t.extent.mmin??0]:[0,0,0,0]}:null}function $(t){return t.originPosition==="lowerLeft"&&t.scale.length===4&&t.translate.length===4}function p(t){if($(t))return t;const{originPosition:r,scale:n,translate:o}=t,s=n[0]??1,l=n[1]??1;return{originPosition:"lowerLeft",scale:[s,r==="lowerLeft"?l:-l,n[2]??1,n[3]??1],translate:[o[0]??0,o[1]??0,o[2]??0,o[3]??0]}}function d({scale:t,translate:r},n){return Math.round((n-r[0])/t[0])}function b({scale:t,translate:r},n){return Math.round((n-r[1])/t[1])}function j({scale:t,translate:r},n){return Math.round(((n??0)-r[2])/t[2])}function q({scale:t,translate:r},n){return n?Math.round((n-r[3])/t[3]):0}function P({scale:t,translate:r},n){return n*t[0]+r[0]}function x({scale:t,translate:r},n){return n*t[1]+r[1]}function m({scale:t,translate:r},n){return(n??0)*t[2]+r[2]}function w({scale:t,translate:r},n){return n?n*t[3]+r[3]:0}function y(t,r){return t&&r?E:t&&!r?C:!t&&r?D:B}const B=(t,r)=>{const n=new Array(r.length);if(!r.length)return n;const o=r[0];let s=P(t,o[0]),l=x(t,o[1]);n[0]=[s,l];const{scale:e,originPosition:a}=t,u=e[0],c=a==="lowerLeft"?e[1]:-e[1];for(let i=1;i<r.length;i++){const[f,h]=r[i];s+=u*f,l+=c*h,n[i]=[s,l]}return n},C=(t,r)=>{const n=new Array(r.length);if(!r.length)return n;const o=r[0];let s=P(t,o[0]),l=x(t,o[1]);n[0]=[s,l,m(t,o[2])];const{scale:e,originPosition:a}=t,u=e[0],c=a==="lowerLeft"?e[1]:-e[1];for(let i=1;i<r.length;i++){const[f,h,g]=r[i];s+=u*f,l+=c*h,n[i]=[s,l,m(t,g)]}return n},D=(t,r)=>{const n=new Array(r.length);if(!r.length)return n;const o=r[0];let s=P(t,o[0]),l=x(t,o[1]);n[0]=[s,l,w(t,o[2])];const{scale:e,originPosition:a}=t,u=e[0],c=a==="lowerLeft"?e[1]:-e[1];for(let i=1;i<r.length;i++){const[f,h,g]=r[i];s+=u*f,l+=c*h,n[i]=[s,l,w(t,g)]}return n},E=(t,r)=>{const n=new Array(r.length);if(!r.length)return n;const o=r[0];let s=P(t,o[0]),l=x(t,o[1]);n[0]=[s,l,m(t,o[2]),w(t,o[3])];const{scale:e,originPosition:a}=t,u=e[0],c=a==="lowerLeft"?e[1]:-e[1];for(let i=1;i<r.length;i++){const[f,h,g,z]=r[i];s+=u*f,l+=c*h,n[i]=[s,l,m(t,g),w(t,z)]}return n};function M(t,r,n){const o=new Array(n.length);for(let s=0;s<n.length;s++)o[s]=r(t,n[s]);return o}function k(t,r,n){const o=p(t);return r.x=d(o,n.x),r.y=b(o,n.y),n.z!=null&&(r.z=j(o,n.z)),n.m!=null&&(r.m=q(o,n.m)),r}function v(t,r,n,o=(n==null?void 0:n.hasZ)??!1,s=(n==null?void 0:n.hasM)??!1){if(n!=null){const l=p(t);r.points=y(o,s)(l,n.points),r.hasZ=o,r.hasM=s}return r}function F(t,r,n,o=(n==null?void 0:n.z)!=null,s=(n==null?void 0:n.m)!=null){if(n==null)return r;const l=p(t);return r.x=P(l,n.x),r.y=x(l,n.y),o&&(r.z=m(l,n.z)),s&&(r.m=w(l,n.m)),r}function G(t,r,n,o=(n==null?void 0:n.hasZ)??!1,s=(n==null?void 0:n.hasM)??!1){if(n!=null){const l=p(t);r.rings=M(l,y(o,s),n.rings),r.hasZ=o,r.hasM=s}return r}function J(t,r,n,o=(n==null?void 0:n.hasZ)??!1,s=(n==null?void 0:n.hasM)??!1){if(n!=null){const l=p(t);r.paths=M(l,y(o,s),n.paths),r.hasZ=o,r.hasM=s}return r}const L=2.4;function N(t){return A(t*L)}function O(t){return Z(t)/L}function Q(t,r,n){const o=Math.sqrt(t**2+r**2)/n;return o>1?0:3/(Math.PI*n**2)*(1-o**2)**2}function R(t){return typeof t=="function"?t:t?r=>+r[t]:()=>1}export{v as B,F as C,G as D,J as H,O as a,p as b,L as c,N as e,k as j,Q as l,T as s,R as u};
