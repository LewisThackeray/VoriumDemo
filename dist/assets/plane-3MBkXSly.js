import{dG as L,aG as E,bC as d}from"./index-DMwY2Yeh.js";import{P as S,u as V,g as p,H as U,c as D,A as w,_ as q}from"./vec32-wPxsRdwz.js";import"./vec42-CwZz9wN3.js";import{e as x}from"./mat3f64-q3fE-ZOt.js";import{e as H}from"./mat4f64-CSKppSlJ.js";import{e as y}from"./quatf64-aQ5IuZRd.js";import{n as G}from"./vec2f64-DA6GkJuH.js";import{n as Q}from"./vec4f64-CMoMXWBi.js";class c{constructor(e){this._create=e,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&L(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const e=2*this._itemsPtr;this._items.length>e&&(this._items.length=e),this._itemsPtr=0}static createVec2f64(){return new c(G)}static createVec3f64(){return new c(E)}static createVec4f64(){return new c(Q)}static createMat3f64(){return new c(x)}static createMat4f64(){return new c(H)}static createQuatf64(){return new c(y)}get test(){}}c.createVec2f64();const m=c.createVec3f64(),j=c.createVec4f64();c.createMat3f64();const ct=c.createMat4f64(),at=c.createQuatf64();function X(t=_){return[t[0],t[1],t[2],t[3]]}function ot(t=_[0],e=_[1],r=_[2],n=_[3]){return b(t,e,r,n,j.get())}function z(t,e){return b(e[0],e[1],e[2],e[3],t)}function ft(t){return t}function b(t,e,r,n,i=X()){return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function K(t,e,r){const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=Math.abs(n-1)>1e-5&&n>1e-12?1/Math.sqrt(n):1;return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function W(t,e,r,n=X()){const i=r[0]-e[0],f=r[1]-e[1],s=r[2]-e[2],I=t[0]-e[0],$=t[1]-e[1],R=t[2]-e[2],O=f*R-s*$,l=s*I-i*R,g=i*$-f*I,C=O*O+l*l+g*g,P=Math.abs(C-1)>1e-5&&C>1e-12?1/Math.sqrt(C):1;return n[0]=O*P,n[1]=l*P,n[2]=g*P,n[3]=-(n[0]*t[0]+n[1]*t[1]+n[2]*t[2]),n}function Y(t,e,r,n=0,i=Math.floor(r*(1/3)),f=Math.floor(r*(2/3))){if(r<3)return!1;e(T,n);let s=i,I=!1;for(;s<r-1&&!I;)e(N,s),s++,I=!U(T,N);if(!I)return!1;for(s=Math.max(s,f),I=!1;s<r&&!I;)e(u,s),s++,D(h,T,N),w(h,h),D(M,N,u),w(M,M),I=!U(T,u)&&!U(N,u)&&Math.abs(S(h,M))<Z;return I?(W(T,N,u,t),!0):(n!==0||i!==1||f!==2)&&Y(t,e,r,0,1,2)}const Z=.99619469809,T=E(),N=E(),u=E(),h=E(),M=E();function ut(t,e,r){return e!==t&&z(t,e),t[3]=-S(t,r),t}function Nt(t,e,r,n){return q(u,e,t),K(r,u,n)}function Et(t,e,r){return e!=null&&A(F(t,e.origin,e.direction,B,r))}function Tt(t,e,r){return A(F(t,e.origin,e.vector,o.NONE,r))}function _t(t,e,r){return A(F(t,e.origin,e.vector,o.CLAMP,r))}function St(t,e){return v(t,e)>=0}function ht(t,e,r){const n=p(m.get(),t,-t[3]),i=k(t,D(m.get(),e,n),m.get());return V(r,i,n),r}function k(t,e,r){const n=p(m.get(),t,S(t,e));return D(r,e,n),r}function v(t,e){return S(t,e)+t[3]}var a;function A(t){return t===a.INTERSECTS_INSIDE_OUT||t===a.INTERSECTS_OUTSIDE_IN}function F(t,e,r,n,i){const f=S(t,r),s=v(t,e);if(f===0)return s>=0?a.INSIDE:a.OUTSIDE;let I=-s/f;return n&o.CLAMP&&(I=d(I,0,1)),!(n&o.INFINITE_MIN)&&I<0||!(n&o.INFINITE_MAX)&&I>1?s>=0?a.INSIDE:a.OUTSIDE:(V(i,e,p(i,r,I)),s>=0?a.INTERSECTS_INSIDE_OUT:a.INTERSECTS_OUTSIDE_IN)}(function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"})(a||(a={}));const _=[0,0,1,0];var o;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(o||(o={}));o.INFINITE_MIN|o.INFINITE_MAX;const B=o.INFINITE_MAX;export{ot as D,ht as H,X as M,ft as O,Nt as P,b as U,m as c,ct as f,z as h,at as o,W as p,Tt as q,j as r,Y as v,_t as w,Et as x,ut as y,St as z};
